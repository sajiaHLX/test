### 事件

1.什么是事件？

​	一个事情或者一个行为，对于页面元素来说，它的很多事件都是天生附带的，只要我们去操作这个元素，就会触发这些行为

“事件就是天生自带的行为，我们操作元素，就会触发相关的实践行为”

2.事件绑定：给天生自带的行为绑定方法，当事件触发，会把对应的方法执行（eg：oBox.onclick=function(){}）

3.元素天生自带的事件

[鼠标事件]

​	click：点击（pc端是点击，移动端是单击[移动端使用会有300ms 的延迟]）

​	dblclick：双击

​	mouseover：鼠标经过

​	mouseout：鼠标移出

​	mouseenter：鼠标进入

​	mouseleave：鼠标离开

​	mousemove：鼠标移动

​	mousedown：鼠标按下（鼠标左右键都触发，按下即触发）

​	mouseup：鼠标抬起（会先触发down和up才触发click）	

​	mousewheel：鼠标滚轮滚动

**mouseenter和mouseover的区别？**

1.over属于滑过（覆盖）事件，从父元素进入到子元素，属于离开了父元素，会触发父元素的out，触发了元素的over

​	enter属于进入，从父元素进入子元素，并不打算离开父元素，不会触发父元素的leave，触发子元素的enter

2.enter和leave阻止了事件的冒泡传播，而over和out还存在冒泡传播的

所以对于父元素的嵌套子元素这种情况，使用over会发生很多不愿意操作的事情，此时我们使用enter会更加简单，操作方便，所以真实项目中enter的使用会比over多

[键盘事件]

​	keydown，keyup，keypress

[表单元素常用事件]

​	focus：获取焦点

​	blur：失去焦点

​	change：内容改变

[其他常用事件]

​	load：加载完成

​	unlod,beforeunload,

​	scroll：滚动条滚动事件

​	resize：大小改变事件 window.onresize=function(){}当浏览器窗口大小发生改变

[移动端手指事件]

​	touch:

​		touchstart:手指按下

​		touchmove：手指移动

​		touchend：手指离开

​		touchcancel：因为意外情况导致手指操作取消

​	gesture：

​		gesturestart：手指按下

​		gesturechange：手指改变

​		gestureend：手指离开

[H5中的AUDIO/VIDEO音频事件]

​	canplay：可以播放（播放过程中可能出现由于资源没有加载完成，导致的卡顿）

​	canplaythrough：资源加载完成，可以正常无障碍播放



#### 事件绑定

[DOM0级事件绑定]

​	[element].onXXX=function(){}

[DOM2级事件绑定]

​	[element].addEventListener(‘XXX’,function(){},false);

​	[element].attachEvent('XXX',function(){}); [IE6~8]

目的：给当前元素的某个事件绑定方法（不管是基于DOM0还是DOM2），都是为了触发元素的相关行为的时候，能做点事情（也就是把绑定的方法执行）：“不仅把方法执行了，而且浏览器还给方法传递了一个实参信息值==>这个值就是事件对象”

```javascript
box.onclick=function(ev){
    //定义一个形参接收方法执行的时候，浏览器传递的信息值(事件对象：mouseevent鼠标事件对象，KeyboardEvent键盘事件对象，Event普通事件对象)
    //事件对象中记录了很多属性名和属性值，这些信息中包含了当前操作的基础信息，例如：鼠标点击位置的X/Y轴坐标，鼠标点击的是谁（事件源）等信息
    /*[mouseEvent]
     * ev.target:事件源（操作的是哪一个元素）
     * ev.clientX/ev.clientY:当前鼠标触发点距离当前窗口左上角的X/Y轴坐标
     * ev.pageX/ev.pageY:当前鼠标触发点距离BODY（第一屏幕）左上角的X/Y轴坐标
     * ev.preventDefault():阻止默认行为
     * ev.stopPropagation():阻止事件的冒泡传播
     * ev.type:当前事件类型
     *[KeyboardEvent]
     * ev.code:当前按键‘keyE’
     * ev.key:当前按键‘e’
     * ev.which/ev.keyCode:当前按键的键盘码
     * let code=ev.which||ev.keyCode；
     *=>常用的键盘码
     * 左-上-右-下：37-38-39-40
     * Backspace：8
     * Enter:13
     * space:32
     * Delete:46
     * Shift；16
     * Alt:18
     * Ctrl:17
     * ESC:27
     * F1~F12:112~123
     * 数字键：48~57
     * 小写字母：65~90
    */
}
```

**事件的默认行为**：事件本身就是天生就有的，某些时间触发，即使你没有绑定方法，也会存在一些效果，这些默认效果就是“事件的默认行为”

​	A标签的点击操作就存在默认行为

​		1.页面跳转

​		2.锚点定位（HASH定位（哈希定位））（基于HASH值我们还可以实现SPA单页面应用）

​	INPUT标签也有默认行为

​		1.输入内容可以呈现到文本框中

​		2.输入内容的时候会把之前输入的一些信息呈现出来（并不是所有情况下都有）

​	SUBMIT按钮也有默认行为

**阻止默认行为**：

​	1.阻止a标签的默认行为：很多时候我们使用a标签并不需要其跳转，仅仅是一个按钮，点击实现功能，也不想锚点定位

​	在结构中阻止：

```javascript
<a href="javascript:;">hlx </a>
```

​	在JS中可以阻止：给其cllick事件绑定方法，当我们点击A标签的时候，先触发click事件，其次才会执行自己的默认行为

**事件的传播机制**

​	冒泡传播：出发当前元素的某一个事件（点击事件）行为，不仅当前元素事件行为触发，而且其祖先元素的相关事件行为也会依次被处罚，这种机制就是“事件的冒泡传播机制”(按照HTML的结构而传播，和页面中的位置无关)

​	1.捕获阶段

​		当你点击的时候，首先会从最外层开始向内查找（找到操作的事件源），查找的目的是，构建出冒泡传播阶段需要传播的路线（查找就是按照HTML层级结构找的）

​	2.目标阶段

​		把事件源的相关操作行为触发（如果绑定了方法，则把方法执行）

​	3.冒泡传播

​		把当前事件源的祖先元素，按照捕获阶段规划的路线，自内而外，把当前事件源的祖先元素的相关事件行为触发（如果某一个祖先元素事件行为绑定了方法，则执行方法，没绑定方法，则行为触发了，什么都不做，继续向上传播即可）

xxx.onxxx=function(){} DOM0事件绑定，给元素的事件行为绑定方法，这些方法都是在当前元素事件行为的冒泡阶段（或者目标阶段）执行的

xxx.addEventListener('xxx',function(){},false) 第三个参数false也是控制绑定的方法在事件传播的冒泡阶段（或者目标阶段）执行；只有第三个参数为true才代表让当前方法在事件传播的捕获阶段触发执行（这种捕获阶段执行没啥实际意义，项目中不用）

#### 事件委托（事件代理）

利用事件的冒泡传播机制，如果一个容器的后代元素中，很多元素的点击行为（其它事件行为也是）都要做一些处理，此时不需要再向以前一样一个个获取一个个绑定了，我们只需要给容器的click绑定方法即可，这样不管点击的是哪一个后代元素，都会根据冒泡传播的传递机制，把容器的click行为触发，把对应的方法执行，根据事件源，我们都可以知道点击的是谁，从而做不同的事情即可。















